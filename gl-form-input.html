
<!--<link rel="import" href="../paper-input/paper-input.html">-->
<link rel="import" href="../iron-input/iron-input.html">
<link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../paper-input/paper-input-error.html">
<link rel="import" href="../paper-input/paper-input-behavior.html">
<link rel="import" href="../paper-input/paper-input-char-counter.html">
<link rel="import" href="../paper-input/paper-input-container.html">
<link rel="import" href="./../numeral-js/numeral-js.html">

<!--<link rel="import" href="../gl-font/gl-rsu-font.html">-->
<!--include="gl-rsu-font"-->
<dom-module id="gl-form-input">
    <style> 
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      } 
      label{
        pointer-events: none;  
        font-family: 'rsuregular' !important;
        font-weight: bold !important;
        font-size: 22px !important;
      }
      input{
        /*font-family: 'rsuregular' !important;
        font-size: 18px !important;*/
      }
      numeral-js{
        position: absolute;
        font-size: 16px;
        top: 26px;
        right: 0%;
       
      }
      .hide{
        display : var(--paper-input-show-number);
      }
    </style>
    <template>
   <paper-input-container no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">
      
        <content select="[prefix]"></content>

        <label hidden$="[[!label]]" aria-hidden="true" for="input">[[label]]</label>

        <input is="iron-input" id="input"
            aria-labelledby$="[[_ariaLabelledBy]]"
            aria-describedby$="[[_ariaDescribedBy]]"
            disabled$="[[disabled]]"
            title$="[[title]]"
            bind-value="{{value}}"
            invalid="{{invalid}}"
            prevent-invalid-input="[[preventInvalidInput]]"
            allowed-pattern="[[allowedPattern]]"
            validator="[[validator]]"
            type$="[[type]]"
            pattern$="[[pattern]]"
            required$="[[required]]"
            autocomplete$="[[autocomplete]]"
            autofocus$="[[autofocus]]"
            inputmode$="[[inputmode]]"
            minlength$="[[minlength]]"
            maxlength$="[[maxlength]]"
            min$="[[min]]"
            max$="[[max]]"
            step$="[[step]]"
            name$="[[name]]"
            placeholder$="[[placeholder]]"
            readonly$="[[readonly]]"
            list$="[[list]]"
            size$="[[size]]"
            autocapitalize$="[[autocapitalize]]"
            autocorrect$="[[autocorrect]]"
            on-change="_onChange"
            tabindex$="[[tabindex]]"
            autosave$="[[autosave]]"
            results$="[[results]]"
            accept$="[[accept]]"
            multiple$="[[multiple]]" 
            on-blur="InputOnBlur" 
            on-focus="InputOnFocus"
            on-keyUp="_formatNumber">

        <content select="[suffix]"></content>
        
        <template is="dom-if" if="[[errorMessage]]">
            <paper-input-error aria-live="assertive">[[errorMessage]]</paper-input-error>
        </template>
        
        <div class="hide">
           <numeral-js number="{{dataFormatNumber}}" format="{{formatNumber}}" print></numeral-js>
        </div>
         
        
        <template is="dom-if" if="[[charCounter]]">
            <paper-input-char-counter></paper-input-char-counter>
        </template>

        </paper-input-container>
    </template>
    <script>
        Polymer({
            is: 'gl-form-input',
            behaviors : [
                Polymer.IronFormElementBehavior,
                Polymer.PaperInputBehavior
            ],
            properties:{
                dataFormatNumber:{
                  type: String,
                  value: ''
                },
                formatNumber:{
                  type: String,
                  value: ''
                }
            },
            ready:function(e){
              if(this.formatNumber)
                this.customStyle['--paper-input-show-number'] = "1";
              else
                this.customStyle['--paper-input-show-number'] = "none";
            },
            _formatNumber:function(e){
              this.dataFormatNumber = e.target.value;
            },
            InputOnBlur : function(e){
                if(e.target.validate()){
                    // console.log('Sucess!!');
                    this.customStyle['--paper-input-container-color'] =  "green";
                }
                this.updateStyles();
            },
            InputOnFocus : function(e){
                // console.log('focus');
                this.customStyle['--paper-input-container-color'] =  "#737373";
                this.updateStyles();
            }
            });
    </script>
</dom-module>
